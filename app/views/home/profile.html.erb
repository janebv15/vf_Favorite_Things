<h1><%= @user.username %>'s favorite things</h1>

<%= link_to 'Add a favorite thing', recommendations_path, class: "nav-link" %>

<p>Current user id: <%= current_user.id %></p>
<p>Total loaded recommendations for this user: <%= @user_recommendations.count %></p>

<% @categories.each do |category| %>
  <h2><%= category.name %> (id: <%= category.id %>)</h2>

  <% recs = @user_recommendations.where({ :category_id => category.id }) %>
  <p>â†’ recs.count for this category: <%= recs.count %></p>

  <% if recs.count > 0 %>
    <table border="0">
      <thead>
        <tr>
          <th><%= category.name.singularize %></th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
        <% recs.each do |rec| %>
          <tr>
            <td><%= rec.name %></td>
            <td><%= rec.description %></td>
          </tr>
        <% end %>
      </tbody>
    </table>
  <% else %>
    <p>No recommendations yet in this category.</p>
  <% end %>
<% end %>
